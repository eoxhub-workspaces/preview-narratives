import{a2 as h,p as m,v,g as p,c as i,o as l,j as r,t as w}from"./chunks/framework.BUpHk5hx.js";const y={key:0,style:{color:"red","font-weight":"bold"}},f={key:1},_=["items"],k=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"page"},"headers":[],"relativePath":"index.md","filePath":"index.md"}'),S={name:"index.md"},b=Object.assign(S,{setup(x){const u=h(),n=m([]),o=m(""),d=[{keys:["title","subtitle","theme"],title:"By keyword",type:"text",placeholder:"Search in title or subtitle",expanded:!0},{key:"theme",title:"By theme",expanded:!0}];v(async()=>{try{let e=new URLSearchParams(window.location.search).get("preview_url");if(e)sessionStorage.setItem("preview_url",e);else if(sessionStorage.getItem("preview_url")){e=sessionStorage.getItem("preview_url");const a=`${p("/")}?preview_url=${encodeURIComponent(e)}`;window.history.replaceState({},"",a)}else throw new Error('Missing "preview_url" parameter in URL.');const s=await fetch(`${e}narratives.json`);if(!s.ok)throw new Error(`Failed to fetch data from: ${e}narratives.json`);const c=await s.json();c.forEach(a=>{a.image=e+a.image}),n.value=c}catch(t){o.value=t.message,console.error("Fetch error:",t)}});const g=t=>{const e=p("/story"),s=new URLSearchParams({storyurl:t.detail.file}).toString();u.go(`${e}?${s}`)};return(t,e)=>(l(),i("div",null,[e[1]||(e[1]=r("div",{class:"large-space"},null,-1)),o.value?(l(),i("div",y,w(o.value),1)):(l(),i("div",f,[r("client-only",null,[r("eox-itemfilter",{items:n.value,titleProperty:"title",imageProperty:"image",subTitleProperty:"subtitle",aggregateResults:"theme",filterProperties:d,resultType:"cards",onSelect:g,style:{"--select-filter-max-items":"10"},class:"large-margin bottom-margin"},e[0]||(e[0]=[r("h6",{slot:"filterstitle",class:"small vertical-margin"},"Filter Stories:",-1),r("h6",{slot:"resultstitle",class:"large large-margin vertical-margin top-padding"},"Stories preview selection",-1)]),40,_)])])),e[2]||(e[2]=r("div",{class:"large-space"},null,-1))]))}});export{k as __pageData,b as default};
